<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>TBCxPayme CUP</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>TBCxPayme CUP <span id="winner"></span></h1>
  </header>
  <main id="tournament"></main>

  <script>
    async function loadData() {
      const res = await fetch("data.json?timestamp=" + new Date().getTime());
      const data = await res.json();
      const container = document.getElementById("tournament");
      container.innerHTML = "";

      data.matches.forEach((m, i) => {
        const div = document.createElement("div");
        div.className = "match";
        div.innerHTML = `
          <div class="team">${m.teamA} <span>${m.scoreA}</span></div>
          <div class="team">${m.teamB} <span>${m.scoreB}</span>
        `;
        container.appendChild(div);
      });

      const winner = findWinner(data.matches);
      if (winner) document.getElementById("winner").textContent = "🏆 " + winner;
    }

    function findWinner(matches) {
      const winners = matches.map(m => m.scoreA > m.scoreB ? m.teamA : m.teamB);
      return winners[winners.length - 1];
    }

    loadData();
  </script>
</body>
</html>
